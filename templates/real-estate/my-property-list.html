{% extends 'base.html' %}
{% load static %}

{% block content %}
    <div id="container-x" class="container-xxl flex-grow-1 container-p-y">
        <h4 class="py-3 breadcrumb-wrapper mb-4">
            {% if not request.user.user_profile.parent_user %}
                <span class="text-muted fw-light">مدیریت املاک / <span class="text-black">لیست املاک مجموعه من</span></span>
            {% else %}
                <span class="text-muted fw-light">مدیریت املاک / <span class="text-black">لسیت املاک در دسترس من</span></span>
            {% endif %}
        </h4>
        <div class="row mb-5">
            {% for real_estate in page %}
                <div class="col-md-6 col-lg-4 mb-3">
                    <div class="card h-100">
                        {% if real_estate.feature_image %}
                            <img class="card-img-top" src="{{ real_estate.feature_image.url }}" alt="Card image cap"
                            style="max-height: 300px; width: auto; object-fit: cover">
                        {% else %}
                            <img class="card-img-top" src="{% static 'custom/real-state-null-logo.jpg' %}"
                                 alt="Card image cap">
                        {% endif %}
                        <div class="card-body">
                            <h5 class="card-title">{{ real_estate.title }}</h5>
                            <p class="card-text">{{ real_estate.description|truncatechars:150 }}</p>
                            <a href="{% url 'real_estate:property-detail-with-id' property_id=real_estate.id %}"
                               class="btn btn-outline-primary">جزئیات</a>
                        </div>
                    </div>
                </div>
            {% empty %}

            {% endfor %}
        {% if page.count != 0 %}
        </div>
        <div class="card mb-4">
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="demo-inline-spacing">
                            <!-- Display page links -->
                            <nav aria-label="Page navigation">
                                <ul class="pagination justify-content-center">
                                    {% if page.has_previous %}
                                        <li class="page-item prev">
                                            <a class="page-link" href="?page={{ page.previous_page_number }}{% if request.GET|length > 0 %}&{% endif %}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value|urlencode }}{% endif %}{% endfor %}"><i
                                                    class="tf-icon bx bx-chevrons-left"></i></a>
                                        </li>
                                    {% endif %}
                                    {% for num in page.paginator.page_range %}
                                        {% if num == page.number %}
                                            <li class="page-item active">
                                                <a class="page-link" href="?page={{ num }}{% if request.GET|length > 0 %}&{% endif %}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value|urlencode }}{% endif %}{% endfor %}">{{ num }}</a>
                                            </li>
                                        {% elif num == page.paginator.page_range.0 or num == page.paginator.page_range.1 or num == page.paginator.page_range.2 or num == page.paginator.page_range.3 or num == page.paginator.page_range.4 %}
                                            <li class="page-item">
                                                <a class="page-link" href="?page={{ num }}{% if request.GET|length > 0 %}&{% endif %}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value|urlencode }}{% endif %}{% endfor %}">{{ num }}</a>
                                            </li>
                                        {% elif num == page.paginator.page_range.5 %}
                                            <li class="page-item">
                                                <span class="page-link">...</span>
                                            </li>
                                        {% endif %}
                                    {% endfor %}
                                    {% if page.has_next %}
                                        <li class="page-item next">
                                            <a class="page-link" href="?page={{ page.next_page_number }}{% if request.GET|length > 0 %}&{% endif %}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value|urlencode }}{% endif %}{% endfor %}"><i
                                                    class="tf-icon bx bx-chevrons-right"></i></a>
                                        </li>
                                    {% endif %}
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <!--/ Card layout -->
    </div>
{% endblock %}

{% block extra_body %}
    <!-- Vendors JS -->
    <script src="{% static 'assets/vendor/libs/jquery-sticky/jquery-sticky.js' %}"></script>
    <script src="{% static 'assets/vendor/libs/cleavejs/cleave.js' %}"></script>
    <script src="{% static 'assets/vendor/libs/cleavejs/cleave-phone.js' %}"></script>
    <script src="{% static 'assets/vendor/libs/select2/select2.js' %}"></script>
    <script src="{% static 'assets/vendor/libs/select2/i18n/fa.js' %}"></script>

    <!-- Main JS -->
    <script src="{% static 'assets/js/main.js' %}"></script>
    <!-- Page JS -->
    <script src="{% static 'assets/js/form-layouts.js' %}"></script>
    <script>
        document.getElementById('container-x').innerHTML = document.getElementById('container-x').innerHTML.replace(/None/g, '-');
    </script>
{% endblock %}